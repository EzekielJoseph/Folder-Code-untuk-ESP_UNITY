#include <Arduino.h>

int ledBuiltin = 2; // Pin untuk LED bawaan ESP32
int blueButton = 13;
int yellowButton = 14; 

void setup() {
    Serial.begin(115200);
    Serial.println("ESP32 ready.");
    pinMode(ledBuiltin, OUTPUT);
    digitalWrite(ledBuiltin, LOW); // Pastikan LED mati saat mulai
}

void loop() {
    if (Serial.available()) {
    // Baca string hingga newline dari Unity
    String data = Serial.readStringUntil('\n');
    int score = data.toInt(); // Konversi ke integer
    int blinkCount = score / 10; // Hitung jumlah kedipan

    Serial.print("Received score: ");
    Serial.println(score);
    Serial.print("Blinking ");
    Serial.print(blinkCount);
    Serial.println(" times");

    // Blink LED sebanyak blinkCount
    for (int i = 0; i < blinkCount; i++) {
    digitalWrite(ledBuiltin, HIGH);
    delay(500); // LED nyala 300ms
    digitalWrite(ledBuiltin, LOW);
    delay(500); // LED mati 300ms
    }

    Serial.println("Blinking complete.");
    }
}